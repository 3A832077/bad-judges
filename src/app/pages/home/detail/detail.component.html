<div class="character-detail-container">

  <nz-card>
    <nz-page-header [nzTitle]="info?.name" [nzSubtitle]="info?.detail"></nz-page-header>
    <nz-row>
    <nz-col [nzSpan]="24" class="character-info">
      <img
        [src]="info.pic"
        [alt]="info?.name"
        class="character-avatar">
    </nz-col>
    </nz-row>

    <div nz-row class="comment-section">
    <nz-col [nzSpan]="24">
      <nz-divider></nz-divider>
        <h1>留言區</h1>
        <nz-list [nzDataSource]="data" [nzRenderItem]="item" nzItemLayout="horizontal" *ngIf="data.length">
          <ng-template #item let-item let-index="index">
            <nz-comment [nzAuthor]="item.author" [nzDatetime]="item.displayTime">
              <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="item.avatar"></nz-avatar>
              <nz-comment-content>
                <p>{{ item.content }}</p>
              </nz-comment-content>
              <nz-comment-action>
                <span
                  nz-tooltip
                  nzTooltipTitle="讚"
                  nz-icon
                  nzType="like"
                ></span>
              </nz-comment-action>
              <nz-comment-action>
                <span
                  nz-tooltip
                  nzTooltipTitle="不喜歡"
                  nz-icon
                  nzType="dislike"
                ></span>
              </nz-comment-action>
              <nz-comment-action>
                <span (click)="showReply(index, item.id)">回覆</span>
              </nz-comment-action>
              <nz-comment *ngIf="item.isReplying">
                <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="info.pic"></nz-avatar>
                <nz-comment-content>
                  <nz-form-item>
                    <textarea
                      nz-input
                      name="content"
                      placeholder="請輸入留言">
                    </textarea>
                  </nz-form-item>
                  <nz-form-item style="justify-content: flex-end;">
                    <button nz-button nzType="primary">回覆</button>
                  </nz-form-item>
                </nz-comment-content>
              </nz-comment>
            </nz-comment>
          </ng-template>
        </nz-list>

        <nz-comment>
          <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="info.pic"></nz-avatar>
          <nz-comment-content>
            <nz-form-item>
              <textarea
                nz-input
                name="content"
                placeholder="請輸入留言"
                [(ngModel)]="inputValue">
              </textarea>
            </nz-form-item>
            <nz-form-item style="justify-content: flex-end;">
              <button nz-button nzType="primary" (click)="handleSubmit()">
                新增留言
              </button>
            </nz-form-item>
          </nz-comment-content>
        </nz-comment>
      </nz-col>
    </div>
  </nz-card>
</div>
